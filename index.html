<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLTutor - 机器学习可视化教学平台</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/kaTeX@0.16.9/dist/katex.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/kaTeX@0.16.9/dist/katex.min.css">
</head>
<body>
<script>
// KaTeX 自动渲染函数
function renderKaTeX() {
    if (typeof katex !== 'undefined') {
        // 渲染页面中的所有数学公式
        document.querySelectorAll('.math-content, .katex-display').forEach(el => {
            let tex = el.textContent || el.innerText;
            if (tex && tex.trim()) {
                // 去掉 $$ 或 $ 分隔符
                tex = tex.trim();
                if (tex.startsWith('$$') && tex.endsWith('$$')) {
                    tex = tex.slice(2, -2).trim();
                } else if (tex.startsWith('$') && tex.endsWith('$')) {
                    tex = tex.slice(1, -1).trim();
                }
                try {
                    katex.render(tex, el, {
                        throwOnError: false,
                        displayMode: el.classList.contains('katex-display')
                    });
                } catch (e) {
                    console.error('KaTeX render error:', e);
                }
            }
        });
    }
}

// 确保 D3 加载完成后再初始化
window.addEventListener('load', function() {
    console.log('Page loaded, D3 version:', d3.version);
    if (typeof initKnowledgeGraph === 'function') {
        initKnowledgeGraph();
    } else {
        console.error('initKnowledgeGraph not found');
    }
    // 渲染 KaTeX
    renderKaTeX();
});
</script>
    <div class="container">
        <header>
            <h1>MLTutor <span class="subtitle">机器学习可视化教学平台</span></h1>
            <p class="subtitle-desc">建立直觉，理解算法，掌握机器学习</p>
        </header>

        <div class="main-content">
            <!-- 知识图谱导航区域 -->
            <div id="knowledge-graph-container">
                <div id="knowledge-graph"></div>
                <p class="hint">点击节点跳转到对应算法 · Ctrl+滚轮或双指缩放</p>
            </div>

            <!-- 快速入口 -->
            <div class="quick-access">
                <div class="card-grid-wrapper">
                    <div class="card-grid">
                        <a href="algorithms/linear-regression/index.html" class="card">
                            <h3>线性回归</h3>
                            <span class="level-badge level-1">Lv1</span>
                        </a>
                        <a href="algorithms/logistic-regression/index.html" class="card">
                            <h3>逻辑回归</h3>
                            <span class="level-badge level-1">Lv1</span>
                        </a>
                        <a href="algorithms/svm/index.html" class="card">
                            <h3>支持向量机</h3>
                            <span class="level-badge level-3">Lv3</span>
                        </a>
                        <a href="algorithms/knn/index.html" class="card">
                            <h3>K 近邻</h3>
                            <span class="level-badge level-1">Lv1</span>
                        </a>
                        <a href="algorithms/k-means/index.html" class="card">
                            <h3>K-Means</h3>
                            <span class="level-badge level-1">Lv1</span>
                        </a>
                        <a href="algorithms/decision-tree/index.html" class="card">
                            <h3>决策树</h3>
                            <span class="level-badge level-2">Lv2</span>
                        </a>
                        <a href="algorithms/nn/index.html" class="card">
                            <h3>神经网络</h3>
                            <span class="level-badge level-4">Lv4</span>
                        </a>
                        <a href="algorithms/cnn/index.html" class="card">
                            <h3>CNN</h3>
                            <span class="level-badge level-4">Lv4</span>
                        </a>
                        <a href="algorithms/rnn/index.html" class="card">
                            <h3>RNN</h3>
                            <span class="level-badge level-4">Lv4</span>
                        </a>
                        <a href="algorithms/attention/index.html" class="card">
                            <h3>注意力机制</h3>
                            <span class="level-badge level-4">Lv4</span>
                        </a>
                        <a href="algorithms/random-forest/index.html" class="card">
                            <h3>随机森林</h3>
                            <span class="level-badge level-3">Lv3</span>
                        </a>
                        <a href="algorithms/naive-bayes/index.html" class="card">
                            <h3>朴素贝叶斯</h3>
                            <span class="level-badge level-2">Lv2</span>
                        </a>
                        <a href="algorithms/pca/index.html" class="card">
                            <h3>PCA</h3>
                            <span class="level-badge level-2">Lv2</span>
                        </a>
                        <a href="algorithms/dbscan/index.html" class="card">
                            <h3>DBSCAN</h3>
                            <span class="level-badge level-2">Lv2</span>
                        </a>
                        <a href="algorithms/tsne/index.html" class="card">
                            <h3>t-SNE</h3>
                            <span class="level-badge level-2">Lv2</span>
                        </a>
                        <a href="algorithms/lda/index.html" class="card">
                            <h3>LDA</h3>
                            <span class="level-badge level-2">Lv2</span>
                        </a>
                        <a href="algorithms/ridge-regression/index.html" class="card">
                            <h3>Ridge 回归</h3>
                            <span class="level-badge level-2">Lv2</span>
                        </a>
                        <a href="algorithms/lasso-regression/index.html" class="card">
                            <h3>Lasso 回归</h3>
                            <span class="level-badge level-2">Lv2</span>
                        </a>
                        <a href="algorithms/polynomial-regression/index.html" class="card">
                            <h3>多项式回归</h3>
                            <span class="level-badge level-1">Lv1</span>
                        </a>
                        <a href="algorithms/hierarchical-clustering/index.html" class="card">
                            <h3>层次聚类</h3>
                            <span class="level-badge level-2">Lv2</span>
                        </a>
                        <a href="algorithms/q-learning/index.html" class="card">
                            <h3>Q-Learning</h3>
                            <span class="level-badge level-5">Lv5</span>
                        </a>
                        <a href="algorithms/policy-gradient/index.html" class="card">
                            <h3>策略梯度</h3>
                            <span class="level-badge level-5">Lv5</span>
                        </a>
                        <a href="algorithms/actor-critic/index.html" class="card">
                            <h3>Actor-Critic</h3>
                            <span class="level-badge level-5">Lv5</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>参考课程：<a href="https://www.bilibili.com/video/BV1PZ421y7Fe/" target="_blank">李宏毅2024机器学习课程</a></p>
            <p>基于 Anthropic "Effective harnesses for long-running agents" 理念构建</p>
        </footer>
    </div>

    <script src="assets/js/knowledge-graph.js"></script>
</body>
</html>
